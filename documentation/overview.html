<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-10-09 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20141009" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MaryTTS &#x2013; Overview</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
        
    <a href="http://github.com/marytts/marytts">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="../index.html" id="bannerLeft">
                                                                                                <img src="../images/marylogo.png"  alt="MaryTTS"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-10-09
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 5.2-SNAPSHOT
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                              <li class="nav-header">Navigation</li>
                              
      <li>
  
                          <a href="../index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="http://mary.dfki.de:59125" class="externalLink" target="_blank" title="Online Demo">
          <i class="none"></i>
        Online Demo</a>
            </li>
                
      <li>
  
                          <a href="../download/index.html" title="Download">
          <i class="none"></i>
        Download</a>
            </li>
                                                                                                                                                                                                                
      <li>
  
                          <a href="../documentation/index.html" title="Documentation">
          <i class="icon-chevron-down"></i>
        Documentation</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><i class="none"></i>Overview</a>
          </li>
                    
      <li>
  
                          <a href="../documentation/history.html" title="History">
          <i class="none"></i>
        History</a>
            </li>
                    
      <li>
  
                          <a href="../documentation/module-architecture.html" title="Architecture Walktrough">
          <i class="none"></i>
        Architecture Walktrough</a>
            </li>
                    
      <li>
  
                          <a href="../documentation/maryxml/index.html" title="MaryXML">
          <i class="none"></i>
        MaryXML</a>
            </li>
                    
      <li>
  
                          <a href="../documentation/tibetan.html" title="Tibetan">
          <i class="none"></i>
        Tibetan</a>
            </li>
                    
      <li>
  
                          <a href="../documentation/publications/index.html" title="Publications">
          <i class="none"></i>
        Publications</a>
            </li>
                                                                      
      <li>
  
                          <a href="../pavoque/index.html" title="PAVOQUE Project">
          <i class="icon-chevron-right"></i>
        PAVOQUE Project</a>
                  </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="../faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                
      <li>
  
                          <a href="../legal-information.html" title="Legal Information">
          <i class="none"></i>
        Legal Information</a>
            </li>
                              <li class="nav-header">Developer Documentation</li>
                                                                                                                                                                                                                                                  
      <li>
  
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="../project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2><a name="Overview"></a>Overview</h2>
<p>The properties of the MARY system are explained here along two lines: on the one hand, the architecture of the system from a natural language processing point of view; on the other hand, the workings of the system from a technical viewpoint .</p>
<div class="section">
<h3><a name="Processing_architecture_and_modules"></a>Processing architecture and modules</h3>
<p>Four parts of the TtS system can be distinguished:</p>
<ol style="list-style-type: decimal">
<li><a href="#a1._The_preprocessing">the preprocessing</a> or text normalisation;</li>
<li>the <a href="#a2._The_natural_language_processing">natural language processing</a>, doing linguistic analysis and annotation;</li>
<li>the <a href="#a3._The_Calculation_of_Acoustic_Parameters">calculation of acoustic parameters</a>, which translates the linguistically annotated symbolic structure into a table containing only physically relevant parameters;</li>
<li>and the <a href="#a4._The_synthesiser">synthesis</a>, transforming the parameter table into an audio file.</li></ol>
<div class="section">
<h4><a name="a1._The_preprocessing"></a>1. The preprocessing</h4>
<p>The preprocessing or text normalisation includes the tokeniser, abbreviation expansion, and numeral expansion. At the same time, a rudimentary internal XML structure is built around the input text, eventually translating any SABLE annotation that may be given in the input text.</p></div>
<div class="section">
<h4><a name="a2._The_natural_language_processing"></a>2. The natural language processing</h4>
<p>The natural language processing is responsible of the calculation of speech-relevant data out of the written input text, viz. phone symbols and intonation labels. In a first NLP step, part of speech labelling and shallow parsing (chunking) is performed. Then, a lexicon lookup is performed in the pronounciation lexicon; unknown tokens are morphologically decomposed and phonemised by grapheme to phoneme (letter to sound) rules. Independently from the lexicon lookup, symbols for the intonation and phrase structure are assigned by rule, using punctuation, part of speech info, and the local syntactic info provided by the chunker. Finally, postlexical phonological rules are applied, modifying the phone symbols and/or the intonation symbols as a function of their context.</p>
<div class="section">
<h5><a name="a2.1_Components"></a>2.1 Components</h5>
<p>The NLP analysis is organised in a modular way, containing the following components:</p>
<ul>
<li>part of speech tagger;</li>
<li>chunker (a partial syntactic analysis);</li></ul>
<ul>
<li>grapheme to phoneme conversion using
<ul>
<li>a lexicon for the known tokens;</li>
<li>grapheme to phoneme rules for the unknown tokens, using a morphological analysis;</li>
<li>syllabification, word stress and phonologic rules;</li></ul></li>
<li>intonation annotation using GToBI;</li>
<li>postlexical phonological rules.</li></ul></div>
<div class="section">
<h5><a name="a2.2_Output"></a>2.2 Output</h5>
<p>The output of the NLP component is a rich MaryXML structure. (For its syntax, see <a href="../lib/MaryXML.xsd">MaryXML.xsd</a>). Example:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;maryxml xmlns=&quot;http://mary.dfki.de/2002/MaryXML&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; version=&quot;0.4&quot; xml:lang=&quot;de&quot;&gt;
&lt;p&gt;
&lt;s&gt;
&lt;phrase&gt;
&lt;t g2p_method=&quot;lexicon&quot; pos=&quot;ART&quot; sampa=&quot;'?aI-n@&quot; syn_attach=&quot;1&quot; syn_phrase=&quot;NP&quot;&gt;
Eine
&lt;/t&gt;
&lt;t accent=&quot;L+H*&quot; g2p_method=&quot;lexicon&quot; pos=&quot;ADJA&quot; sampa=&quot;'?EC-t@&quot; syn_attach=&quot;0&quot; syn_phrase=&quot;NP&quot;&gt;
echte
&lt;/t&gt;
&lt;t accent=&quot;H*&quot; g2p_method=&quot;lexicon&quot; pos=&quot;NN&quot; sampa=&quot;hE-'RaUs-fO6-d6-RUN&quot; syn_attach=&quot;0&quot; syn_phrase=&quot;NP&quot;&gt;
Herausforderung
&lt;/t&gt;
&lt;t pos=&quot;$.&quot; syn_attach=&quot;2&quot; syn_phrase=&quot;_&quot;&gt;
.
&lt;/t&gt;
&lt;boundary breakindex=&quot;5&quot; tone=&quot;L-%&quot;/&gt;
&lt;/phrase&gt;
&lt;/s&gt;
&lt;/p&gt;
&lt;/maryxml&gt;</pre></div></div></div>
<div class="section">
<h4><a name="a3._The_Calculation_of_Acoustic_Parameters"></a>3. The Calculation of Acoustic Parameters</h4>
<p>This rich input is then translated into an acoustic parameter file, by applying a model for duration (the so-called Klatt Rules adapted for German) and for intonation (a ToBI based approach, translating intonation symbols into targets on declination lines that can be attributed precise frequency values).</p>
<div class="section">
<h5><a name="a3.1_Output"></a>3.1 Output</h5>
<p>The output is a parameter file as used in one way or another by many speech synthesis systems. As one type of waveform synthesizer, we use MBROLA as a synthesis system, so the parameter output format is the MBROLA input format. Every phone symbol is assigned a duration in milliseconds; some phone symbols are assigned a (time,frequency) target, where time is in percent of the phone duration and frequency is in Hertz. Example:</p>
<div class="source">
<pre>_       10
aI      130     (0,209)
n       62
@       52      (0,187)
_       55
E       84      (50,232)
C       71
t       57
@       52
h       61
E       71      (0,224)
R       63
aU      148     (50,174)
s       86
f       71
O       68
6       31
d       42
6       60
R       60
U       139
N       78      (100,160)
_       400
#</pre></div></div></div>
<div class="section">
<h4><a name="a4._The_synthesiser"></a>4. The synthesiser</h4>
<p>Finally, the synthesiser creates a sound file from a phoneme string. We use MBROLA for diphone synthesis, as well as cluster unit selection code derived from FreeTTS for unit selection synthesis. Several audio formats can be generated, including 16 bit wav, aiff, and au, and mp3.</p><hr /></div></div></div>
<div class="section">
<h2><a name="Technical_architecture"></a>Technical architecture</h2>
<p>The system is composed of a main server or &quot;manager&quot; program, a number of modules doing the actual processing, and a client sending input data and receiving processing results. The system, implemented in Java, is </p>
<ul>
<li>multi-threaded: each request is processed in a thread of its own, which allows the server to process multiple requests &quot;in parallel&quot;;</li>
<li>flexible: both pure Java modules and &quot;external&quot; modules (external programs reading from stdin and writing to stdout) are supported and can easily be integrated into the system;</li>
<li>XML-based: state-of-the-art technologies such as DOM (for internal manipulation of the MaryXML structures) and XSLT (for input markup parsing) are used to make the system as transparent and understandable as possible.</li></ul></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                        <p class="pull-right">Copyright &copy;                    2000&#x2013;2014
                        <a href="http://www.dfki.de/">DFKI GmbH</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
